'''
A modern hospital decided to keep all patient records in a Python dictionary. Each patient’s name was used as the key in the dictionary.The value for each patient was a list of visits, and every visit stored the department name and consultation fee. For instance, a patient might have visited “Cardiology” with a fee of 500, and later “Neurology” with a fee of 700 another patient might have visited “Orthopedics” twice, each with different fees. The hospital wanted to calculate:

1)the total fee paid by each patient by adding up all their consultation charges.
2)At the same time, management was curious to know which department earned the most overall revenue .
Input Format

First line: integer N (number of visits) Next N lines: Patient name Department Fee.Consider paitent name to be unique

Constraints

1 ≤ N ≤ 200 1 ≤ Fee ≤ 10000

Output Format

Print each patient and total fee Print DepartmentName with most revenue .

Sample Input 0

5
Alice Cardiology 500
Bob Neurology 300
Alice Neurology 200
Charlie Cardiology 400
Bob Cardiology 600
Sample Output 0

Alice 700
Bob 900
Charlie 400
TopDepartment Cardiology
Sample Input 1

3
David Ortho 200
David Ortho 300
Eve Neuro 400
Sample Output 1

David 500
Eve 400
TopDepartment Ortho
'''


from collections import OrderedDict, defaultdict

N = int(input())
patient_fees = OrderedDict()
department_revenue = defaultdict(int)

for _ in range(N):
    data = input().split()
    patient, department, fee = data[0], data[1], int(data[2])
    
    if patient not in patient_fees:
        patient_fees[patient] = 0
    patient_fees[patient] += fee
    department_revenue[department] += fee

for patient, total_fee in patient_fees.items():
    print(patient, total_fee)

top_department = max(department_revenue.items(), key=lambda x: x[1])[0]
print("TopDepartment", top_department)
